https://itch.io/game/edit/4101062#published
# מטלת Tilemap + Pathfinding

## מבנה כללי
הפרויקט מחולק לשני חלקים עיקריים:

1. הרחבת התנהגות אויבים בעזרת מכונת מצבים (FSM) – סעיף ג’ בחלק הראשון.
2. אלגוריתם לבחירת נקודת התחלה “לא תקועה” במפת מערה אקראית – סעיף ב’ בחלק האלגוריתמים.

---

## 1. מכונת מצבים לאויב (Guard FSM)

בסצנה `e-guard-fsm`:

- יצרתי שומר עם שלושה מצבים:
  - Idle – עומד במקום לזמן קבוע.
  - Patrol – נע לאורך מסלול נקודות במפה.
  - Chase – רודף אחרי השחקן באמצעות ה־BFS מהשיעור.
- המעברים בין המצבים:
  - Idle → Chase כשמרחק מהשחקן קטן מרדיוס ראייה.
  - Idle → Patrol אחרי סיום זמן ההמתנה.
  - Patrol → Chase כשמרחק מהשחקן קטן מרדיוס ראייה.
  - Chase → Patrol כשהשחקן מתרחק מעבר לרדיוס “איבוד”.
- השתמשתי במחלקת StateMachine כללית:
  - מחזיקה רשימת מצבים ומעברים.
  - דואגת שרק מצב אחד יהיה פעיל בכל רגע.
- כל הפרמטרים (זמן idle, רדיוסי ראייה) מוגדרים כשדות `[SerializeField]` עם שמות משמעותיים, כדי להימנע ממספרי קסם.

---

## 2. אלגוריתם “לא תקוע במערה” (BFS על Cave)

### 2.1 לוגיקה מופשטת (קונסול + בדיקות)

- מימשתי מחלקה המייצגת מערה כרשת ריבועית של קירות/רצפה.
- מימשתי פונקציה שסופרת בעזרת BFS כמה אריחי רצפה שונים נגישים מנקודת התחלה.
- מימשתי פונקציה שבוחרת נקודת התחלה אקראית:
  - בודקת בעזרת BFS האם ניתן להגיע ממנה למספר מינימלי של אריחים (100).
  - אם לא – בוחרת נקודה אחרת, עד למספר ניסיונות מרבי.
- הוספתי בדיקות יחידה על מפות קטנות כדי לוודא שה־BFS וספירת האריחים עובדים נכון.

### 2.2 שילוב ביוניטי – סצנה `e-cave-good-start`

- שכפלתי את הסצנה `d-tilemap-100-player` והרחבתי את הסקריפט `TilemapCaveGenerator`.
- תהליך העבודה:
  - יצירת מערה אקראית על גודל 100×100 והרצת צעדי “חלקות”.
  - בחירת נקודת התחלה לשחקן:
    - בחירת תא רצפה אקראי.
    - הרצת BFS וספירת אריחי רצפה נגישים.
    - אם יש לפחות 100 אריחים – המרת הקואורדינטות למיקום בעולם והזזת השחקן לשם.
    - אם לא – ניסיון נוסף, עד למקסימום ניסיונות.
- כל הערכים (גודל המפה, מספר צעדי סימולציה, מספר אריחים מינימלי, מספר ניסיונות, seed רנדומלי) מוגדרים כשדות `[SerializeField]` ללא מספרי קסם בקוד.

---

